import{u as h,a as y,b,r as j,c as f,j as e}from"./index-C8pBA-N9.js";function w(){var i,l,c;let{register:r,handleSubmit:d,formState:{errors:s}}=h(),{currentUser:a}=y(t=>t.userAuthorLoginReducer),u=b(),[n,m]=j.useState(""),x=localStorage.getItem("token");const p=f.create({headers:{Authorization:`Bearer ${x}`}});async function g(t){t.dateOfCreation=new Date,t.dateOfModification=new Date,t.articleId=Date.now(),t.username=a.username,t.comments=[],t.status=!0,console.log(t);const o=await p.post(`${window.location.origin}/author-api/post-article`,t);console.log(o),o.data.message==="Article created Successfully"?u(`/author-profile/my-articles/${a.username}`):m(o.data.message)}return e.jsx("div",{className:"bg-blue-200 py-16 min-h-96",children:e.jsx("div",{className:"m-auto  w-10/12 md:w-8/12 lg:w-7/12 xl:w-5/12  rounded-lg shadow-2xl px-2 py-4 bg-white ",children:e.jsxs("form",{onSubmit:d(g),className:"px-5 py-2",children:[e.jsx("h1",{className:"mb-3 text-3xl font-bold font-mono text-center",children:"Write an Article"}),e.jsxs("div",{className:"text-center font-sans",children:[((i=s.title)==null?void 0:i.type)==="required"&&e.jsx("p",{className:"text-red-600",children:"*Username required"}),((l=s.category)==null?void 0:l.type)==="required"&&e.jsx("p",{className:"text-red-600",children:"*Category required"}),((c=s.content)==null?void 0:c.type)==="required"&&e.jsx("p",{className:"text-red-600",children:"*Content required"})]}),e.jsxs("div",{className:"flex flex-col gap-5 my-5",children:[e.jsx("input",{className:"border-black border-2 rounded-md px-2 py-1 text-center text-lg",type:"text",name:"title",id:"title",placeholder:"Title",...r("title",{required:!0})}),e.jsxs("select",{name:"category",id:"category",className:"border-2 border-black rounded-md px-3 py-1 ",...r("category",{required:!0}),children:[e.jsx("option",{value:"",selected:!0,disabled:!0,children:"--Select Category--"}),e.jsx("option",{value:"Programming",children:"Programming"}),e.jsx("option",{value:"Rocket Science",children:"Rocket Science"}),e.jsx("option",{value:"Biology",children:"Biology"}),e.jsx("option",{value:"Physics",children:"Physics"}),e.jsx("option",{value:"Scientists",children:"Scientists"}),e.jsx("option",{value:"Business",children:"Business"})]}),e.jsx("textarea",{name:"content",id:"content",cols:"30",rows:"8",className:"border-2 border-black px-1 py-1 rounded-lg font-serif ",placeholder:"Type your Content",...r("content",{required:!0})})]}),e.jsx("button",{type:"submit",className:"shadow-sm bg-green-400 hover:bg-green-500 font-medium rounded-lg px-3 py-1 block m-auto mt-4",children:"Post Article"}),n!==""&&e.jsx("p",{className:"text-red-500 text-lg text-center",children:n})]})})})}export{w as default};
